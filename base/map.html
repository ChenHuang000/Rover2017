<!DOCTYPE html>
<html style="height: 100%; width: 100%;">
    <head>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
        <script src="https://unpkg.com/pouchdb@^5.2.0/dist/pouchdb.js"></script>
        <script src="https://unpkg.com/leaflet.tilelayer.pouchdbcached@latest/L.TileLayer.PouchDBCached.js"></script>
        <script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>

    </head>

    <body style="height: 100%; width: 100%;">
        <div id="mapid" style="height: 100%; width: 100%"></div>
        <script>


            var map = L.map('mapid').setView([38.4063, -110.792286], 17);
            L.tileLayer.wms(
                "https://services.nationalmap.gov/arcgis/services/USGSImageOnlyLarge/MapServer/WMSServer?",
                {
                    layers: "0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32",
                    useCache: true,
                    crossOrigin: true,
                    useOnlyCache: false
                }
            ).addTo(map);
            var marker = L.marker([38.4063, -110.792286]).addTo(map);
            L.control.scale().addTo(map);
            var webChannel = new QWebChannel(qt.webChannelTransport, function(channel) {

           channel.objects.gps.coordsChanged.connect(function(coords){
                marker.setLatLng(coords);
                });

            });

        </script>
    </body>
</html>
